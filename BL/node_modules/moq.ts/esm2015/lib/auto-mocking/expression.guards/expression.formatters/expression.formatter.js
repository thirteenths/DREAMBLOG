import { FunctionExpression, GetPropertyExpression, MethodExpression, NewOperatorExpression } from "../../../reflector/expressions";
export class ExpressionFormatter {
    constructor(functionFormatter, propertyKeyFormatter, instanceMethodFormatter, constantFormatter) {
        this.functionFormatter = functionFormatter;
        this.propertyKeyFormatter = propertyKeyFormatter;
        this.instanceMethodFormatter = instanceMethodFormatter;
        this.constantFormatter = constantFormatter;
    }
    format(expression, name) {
        if (expression instanceof FunctionExpression) {
            return this.functionFormatter.format(expression);
        }
        if (expression instanceof GetPropertyExpression) {
            return `.${this.propertyKeyFormatter.format(expression.name)}`;
        }
        if (expression instanceof MethodExpression) {
            return `.${this.instanceMethodFormatter.format(expression)}`;
        }
        if (expression instanceof NewOperatorExpression) {
            return `new ${name}(${this.constantFormatter.format(expression.args)})`;
        }
        return `[${expression}]`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwcmVzc2lvbi5mb3JtYXR0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9tb3Evc3JjL2xpYi9hdXRvLW1vY2tpbmcvZXhwcmVzc2lvbi5ndWFyZHMvZXhwcmVzc2lvbi5mb3JtYXR0ZXJzL2V4cHJlc3Npb24uZm9ybWF0dGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFSCxrQkFBa0IsRUFDbEIscUJBQXFCLEVBQ3JCLGdCQUFnQixFQUNoQixxQkFBcUIsRUFDeEIsTUFBTSxnQ0FBZ0MsQ0FBQztBQU14QyxNQUFNLE9BQU8sbUJBQW1CO0lBQzVCLFlBQ3FCLGlCQUFvQyxFQUNwQyxvQkFBMEMsRUFDMUMsdUJBQXdDLEVBQ3hDLGlCQUFvQztRQUhwQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFDMUMsNEJBQXVCLEdBQXZCLHVCQUF1QixDQUFpQjtRQUN4QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO0lBQ3pELENBQUM7SUFFTSxNQUFNLENBQUMsVUFBZ0MsRUFBRSxJQUFZO1FBQ3hELElBQUksVUFBVSxZQUFZLGtCQUFrQixFQUFFO1lBQzFDLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNwRDtRQUNELElBQUksVUFBVSxZQUFZLHFCQUFxQixFQUFFO1lBQzdDLE9BQU8sSUFBSSxJQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1NBQ2xFO1FBQ0QsSUFBSSxVQUFVLFlBQVksZ0JBQWdCLEVBQUU7WUFDeEMsT0FBTyxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztTQUNoRTtRQUNELElBQUksVUFBVSxZQUFZLHFCQUFxQixFQUFFO1lBQzdDLE9BQU8sT0FBTyxJQUFJLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztTQUMzRTtRQUVELE9BQU8sSUFBSSxVQUFVLEdBQUcsQ0FBQztJQUM3QixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEV4cHJlc3Npb25zLFxuICAgIEZ1bmN0aW9uRXhwcmVzc2lvbixcbiAgICBHZXRQcm9wZXJ0eUV4cHJlc3Npb24sXG4gICAgTWV0aG9kRXhwcmVzc2lvbixcbiAgICBOZXdPcGVyYXRvckV4cHJlc3Npb25cbn0gZnJvbSBcIi4uLy4uLy4uL3JlZmxlY3Rvci9leHByZXNzaW9uc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25Gb3JtYXR0ZXIgfSBmcm9tIFwiLi4vLi4vLi4vZm9ybWF0dGVycy9mdW5jdGlvbi5mb3JtYXR0ZXJcIjtcbmltcG9ydCB7IFByb3BlcnR5S2V5Rm9ybWF0dGVyIH0gZnJvbSBcIi4uLy4uLy4uL2Zvcm1hdHRlcnMvcHJvcGVydHkta2V5LmZvcm1hdHRlclwiO1xuaW1wb3J0IHsgTWV0aG9kRm9ybWF0dGVyIH0gZnJvbSBcIi4uLy4uLy4uL2Zvcm1hdHRlcnMvbWV0aG9kLmZvcm1hdHRlclwiO1xuaW1wb3J0IHsgQ29uc3RhbnRGb3JtYXR0ZXIgfSBmcm9tIFwiLi4vLi4vLi4vZm9ybWF0dGVycy9jb25zdGFudC5mb3JtYXR0ZXJcIjtcblxuZXhwb3J0IGNsYXNzIEV4cHJlc3Npb25Gb3JtYXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGZ1bmN0aW9uRm9ybWF0dGVyOiBGdW5jdGlvbkZvcm1hdHRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwcm9wZXJ0eUtleUZvcm1hdHRlcjogUHJvcGVydHlLZXlGb3JtYXR0ZXIsXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgaW5zdGFuY2VNZXRob2RGb3JtYXR0ZXI6IE1ldGhvZEZvcm1hdHRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb25zdGFudEZvcm1hdHRlcjogQ29uc3RhbnRGb3JtYXR0ZXIpIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9ybWF0KGV4cHJlc3Npb246IEV4cHJlc3Npb25zPHVua25vd24+LCBuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBGdW5jdGlvbkV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bmN0aW9uRm9ybWF0dGVyLmZvcm1hdChleHByZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwcmVzc2lvbiBpbnN0YW5jZW9mIEdldFByb3BlcnR5RXhwcmVzc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIGAuJHt0aGlzLnByb3BlcnR5S2V5Rm9ybWF0dGVyLmZvcm1hdChleHByZXNzaW9uLm5hbWUpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBNZXRob2RFeHByZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gYC4ke3RoaXMuaW5zdGFuY2VNZXRob2RGb3JtYXR0ZXIuZm9ybWF0KGV4cHJlc3Npb24pfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cHJlc3Npb24gaW5zdGFuY2VvZiBOZXdPcGVyYXRvckV4cHJlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBgbmV3ICR7bmFtZX0oJHt0aGlzLmNvbnN0YW50Rm9ybWF0dGVyLmZvcm1hdChleHByZXNzaW9uLmFyZ3MpfSlgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGBbJHtleHByZXNzaW9ufV1gO1xuICAgIH1cbn1cbiJdfQ==