import { MethodExpression } from "../reflector/expressions";
/**
 * @hidden
 */
export class SpyFunctionProvider {
    constructor(tracker, interactionPlayer) {
        this.tracker = tracker;
        this.interactionPlayer = interactionPlayer;
        this.map = new Map();
    }
    get(property) {
        if (this.map.has(property) === false) {
            this.map.set(property, (...args) => {
                const interaction = new MethodExpression(property, args);
                this.tracker.add(interaction);
                return this.interactionPlayer.play(interaction);
            });
        }
        return this.map.get(property);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3B5LWZ1bmN0aW9uLnByb3ZpZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbW9xL3NyYy9saWIvaW50ZXJjZXB0b3JzL3NweS1mdW5jdGlvbi5wcm92aWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUU1RDs7R0FFRztBQUNILE1BQU0sT0FBTyxtQkFBbUI7SUFHNUIsWUFDWSxPQUFnQixFQUNoQixpQkFBb0M7UUFEcEMsWUFBTyxHQUFQLE9BQU8sQ0FBUztRQUNoQixzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBSnhDLFFBQUcsR0FBRyxJQUFJLEdBQUcsRUFBaUMsQ0FBQztJQU12RCxDQUFDO0lBRU0sR0FBRyxDQUFDLFFBQXFCO1FBQzVCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEtBQUssS0FBSyxFQUFFO1lBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFPLEVBQUU7Z0JBQ3BDLE1BQU0sV0FBVyxHQUFHLElBQUksZ0JBQWdCLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO2dCQUN6RCxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDOUIsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3BELENBQUMsQ0FBQyxDQUFDO1NBQ047UUFDRCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYWNrZXIgfSBmcm9tIFwiLi4vdHJhY2tlci90cmFja2VyXCI7XG5pbXBvcnQgeyBJbnRlcmFjdGlvblBsYXllciB9IGZyb20gXCIuLi9pbnRlcmFjdGlvbi1wbGF5ZXJzL2ludGVyYWN0aW9uLnBsYXllclwiO1xuaW1wb3J0IHsgTWV0aG9kRXhwcmVzc2lvbiB9IGZyb20gXCIuLi9yZWZsZWN0b3IvZXhwcmVzc2lvbnNcIjtcblxuLyoqXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjbGFzcyBTcHlGdW5jdGlvblByb3ZpZGVyIHtcbiAgICBwcml2YXRlIG1hcCA9IG5ldyBNYXA8UHJvcGVydHlLZXksICguLi5hcmdzKSA9PiBhbnk+KCk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSB0cmFja2VyOiBUcmFja2VyLFxuICAgICAgICBwcml2YXRlIGludGVyYWN0aW9uUGxheWVyOiBJbnRlcmFjdGlvblBsYXllcikge1xuXG4gICAgfVxuXG4gICAgcHVibGljIGdldChwcm9wZXJ0eTogUHJvcGVydHlLZXkpOiAoLi4uYXJncykgPT4gYW55IHtcbiAgICAgICAgaWYgKHRoaXMubWFwLmhhcyhwcm9wZXJ0eSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQocHJvcGVydHksICguLi5hcmdzKTogYW55ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlcmFjdGlvbiA9IG5ldyBNZXRob2RFeHByZXNzaW9uKHByb3BlcnR5LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZXIuYWRkKGludGVyYWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGlvblBsYXllci5wbGF5KGludGVyYWN0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1hcC5nZXQocHJvcGVydHkpO1xuICAgIH1cbn1cbiJdfQ==