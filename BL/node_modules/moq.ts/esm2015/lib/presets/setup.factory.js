/**
 * @Hidden
 */
export class SetupFactory {
    constructor(presetBuilderFactory, autoMockProvider, expressionGuard) {
        this.presetBuilderFactory = presetBuilderFactory;
        this.autoMockProvider = autoMockProvider;
        this.expressionGuard = expressionGuard;
    }
    create([shallow, ...rest]) {
        this.expressionGuard.verify([shallow, ...rest]);
        const preset = this.presetBuilderFactory(shallow);
        if (rest.length === 0) {
            return preset;
        }
        const mock = this.autoMockProvider.getOrCreate(shallow);
        preset.returns(mock.object());
        const setup = mock.resolve(SetupFactory);
        return setup.create(rest);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dXAuZmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21vcS9zcmMvbGliL3ByZXNldHMvc2V0dXAuZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFPQTs7R0FFRztBQUNILE1BQU0sT0FBTyxZQUFZO0lBQ3JCLFlBQ3FCLG9CQUFxRSxFQUNyRSxnQkFBa0MsRUFDbEMsZUFBdUM7UUFGdkMseUJBQW9CLEdBQXBCLG9CQUFvQixDQUFpRDtRQUNyRSxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO1FBQ2xDLG9CQUFlLEdBQWYsZUFBZSxDQUF3QjtJQUU1RCxDQUFDO0lBRU0sTUFBTSxDQUFjLENBQUMsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFtQjtRQUMzRCxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDaEQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELElBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDbkIsT0FBTyxNQUFNLENBQUM7U0FDakI7UUFFRCxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hELE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDOUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6QyxPQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUF5QixDQUFDO0lBQ3RELENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElQcmVzZXRCdWlsZGVyIH0gZnJvbSBcIi4uL21vcVwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbnMgfSBmcm9tIFwiLi4vcmVmbGVjdG9yL2V4cHJlc3Npb25zXCI7XG5pbXBvcnQgeyBQcmVzZXRCdWlsZGVyRmFjdG9yeSB9IGZyb20gXCIuL3ByZXNldC1idWlsZGVyLmZhY3RvcnlcIjtcbmltcG9ydCB7IFR5cGVPZkluamVjdGlvbkZhY3RvcnkgfSBmcm9tIFwiLi4vaW5qZWN0b3IvaW5qZWN0aW9uLWZhY3RvcnlcIjtcbmltcG9ydCB7IEF1dG9Nb2NrUHJvdmlkZXIgfSBmcm9tIFwiLi4vYXV0by1tb2NraW5nL2F1dG8tbW9jay5wcm92aWRlclwiO1xuaW1wb3J0IHsgQ29tcGxleEV4cHJlc3Npb25HdWFyZCB9IGZyb20gXCIuLi9hdXRvLW1vY2tpbmcvZXhwcmVzc2lvbi5ndWFyZHMvY29tcGxleC1leHByZXNzaW9uLmd1YXJkXCI7XG5cbi8qKlxuICogQEhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgU2V0dXBGYWN0b3J5PFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwcmVzZXRCdWlsZGVyRmFjdG9yeTogVHlwZU9mSW5qZWN0aW9uRmFjdG9yeTxQcmVzZXRCdWlsZGVyRmFjdG9yeTxUPj4sXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgYXV0b01vY2tQcm92aWRlcjogQXV0b01vY2tQcm92aWRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBleHByZXNzaW9uR3VhcmQ6IENvbXBsZXhFeHByZXNzaW9uR3VhcmQpIHtcblxuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGU8UiA9IHVua25vd24+KFtzaGFsbG93LCAuLi5yZXN0XTogRXhwcmVzc2lvbnM8VD5bXSk6IElQcmVzZXRCdWlsZGVyPFQsIFI+IHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uR3VhcmQudmVyaWZ5KFtzaGFsbG93LCAuLi5yZXN0XSk7XG4gICAgICAgIGNvbnN0IHByZXNldCA9IHRoaXMucHJlc2V0QnVpbGRlckZhY3Rvcnkoc2hhbGxvdyk7XG4gICAgICAgIGlmIChyZXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHByZXNldDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1vY2sgPSB0aGlzLmF1dG9Nb2NrUHJvdmlkZXIuZ2V0T3JDcmVhdGUoc2hhbGxvdyk7XG4gICAgICAgIHByZXNldC5yZXR1cm5zKG1vY2sub2JqZWN0KCkpO1xuICAgICAgICBjb25zdCBzZXR1cCA9IG1vY2sucmVzb2x2ZShTZXR1cEZhY3RvcnkpO1xuICAgICAgICByZXR1cm4gc2V0dXAuY3JlYXRlKHJlc3QpIGFzIElQcmVzZXRCdWlsZGVyPFQsIFI+O1xuICAgIH1cbn1cbiJdfQ==