import { GetPropertyExpression, MethodExpression } from "../expressions";
export class MethodReflectorTrap {
    constructor(expressions) {
        this.expressions = expressions;
        return this.factory();
    }
    factory() {
        return (target, thisArg, args) => {
            const last = this.expressions.pop();
            if (last instanceof GetPropertyExpression) {
                this.expressions.push(new MethodExpression(last.name, args));
            }
            else {
                if (last !== undefined) {
                    this.expressions.push(last);
                }
            }
            return undefined;
        };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWV0aG9kLnJlZmxlY3Rvci10cmFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbW9xL3NyYy9saWIvcmVmbGVjdG9yL3RyYXBzL21ldGhvZC5yZWZsZWN0b3ItdHJhcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUV6RSxNQUFNLE9BQU8sbUJBQW1CO0lBQzVCLFlBQ3FCLFdBQW1DO1FBQW5DLGdCQUFXLEdBQVgsV0FBVyxDQUF3QjtRQUNwRCxPQUFPLElBQUksQ0FBQyxPQUFPLEVBQVMsQ0FBQztJQUNqQyxDQUFDO0lBRUQsT0FBTztRQUNILE9BQU8sQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxFQUFFO1lBQzdCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDcEMsSUFBSSxJQUFJLFlBQVkscUJBQXFCLEVBQUU7Z0JBQ3ZDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2FBQ2hFO2lCQUFNO2dCQUNILElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtvQkFDcEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQy9CO2FBQ0o7WUFDRCxPQUFPLFNBQVMsQ0FBQztRQUNyQixDQUFDLENBQUM7SUFDTixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeHByZXNzaW9ucyB9IGZyb20gXCIuLi9leHByZXNzaW9uc1wiO1xuaW1wb3J0IHsgSW5qZWN0aW9uRmFjdG9yeSB9IGZyb20gXCIuLi8uLi9pbmplY3Rvci9pbmplY3Rpb24tZmFjdG9yeVwiO1xuaW1wb3J0IHsgR2V0UHJvcGVydHlFeHByZXNzaW9uLCBNZXRob2RFeHByZXNzaW9uIH0gZnJvbSBcIi4uL2V4cHJlc3Npb25zXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXRob2RSZWZsZWN0b3JUcmFwIGltcGxlbWVudHMgSW5qZWN0aW9uRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZXhwcmVzc2lvbnM6IEV4cHJlc3Npb25zPHVua25vd24+W10pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmFjdG9yeSgpIGFzIGFueTtcbiAgICB9XG5cbiAgICBmYWN0b3J5KCkge1xuICAgICAgICByZXR1cm4gKHRhcmdldCwgdGhpc0FyZywgYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFzdCA9IHRoaXMuZXhwcmVzc2lvbnMucG9wKCk7XG4gICAgICAgICAgICBpZiAobGFzdCBpbnN0YW5jZW9mIEdldFByb3BlcnR5RXhwcmVzc2lvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhwcmVzc2lvbnMucHVzaChuZXcgTWV0aG9kRXhwcmVzc2lvbihsYXN0Lm5hbWUsIGFyZ3MpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cHJlc3Npb25zLnB1c2gobGFzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXX0=