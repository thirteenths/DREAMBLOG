import { It } from "./expression-predicates";
export class AsyncExpressionDetector {
    isAsync(expression) {
        if (expression instanceof It) {
            return false;
        }
        const get = () => proxy;
        const set = () => true;
        const apply = () => proxy;
        const has = () => false;
        const construct = () => proxy;
        const options = { get, set, apply, has, construct };
        const reflector = function () {
            return undefined;
        };
        const proxy = new Proxy(reflector, options);
        const predicate = expression(proxy);
        return predicate instanceof It ? false : predicate instanceof Promise;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXN5bmMtZXhwcmVzc2lvbi5kZXRlY3Rvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL21vcS9zcmMvbGliL3JlZmxlY3Rvci9hc3luYy1leHByZXNzaW9uLmRldGVjdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUU3QyxNQUFNLE9BQU8sdUJBQXVCO0lBQ3pCLE9BQU8sQ0FBSSxVQUEwQjtRQUN4QyxJQUFJLFVBQVUsWUFBWSxFQUFFLEVBQUU7WUFDMUIsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFFRCxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7UUFDeEIsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQ3ZCLE1BQU0sS0FBSyxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQztRQUMxQixNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUM7UUFDeEIsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDO1FBQzlCLE1BQU0sT0FBTyxHQUFHLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBQyxDQUFDO1FBQ2xELE1BQU0sU0FBUyxHQUFHO1lBQ2QsT0FBTyxTQUFTLENBQUM7UUFDckIsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzVDLE1BQU0sU0FBUyxHQUFHLFVBQVUsQ0FBQyxLQUFZLENBQUMsQ0FBQztRQUUzQyxPQUFPLFNBQVMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsU0FBUyxZQUFZLE9BQU8sQ0FBQztJQUMxRSxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJRXhwcmVzc2lvbiB9IGZyb20gXCIuL2V4cHJlc3Npb24tcmVmbGVjdG9yXCI7XG5pbXBvcnQgeyBJdCB9IGZyb20gXCIuL2V4cHJlc3Npb24tcHJlZGljYXRlc1wiO1xuXG5leHBvcnQgY2xhc3MgQXN5bmNFeHByZXNzaW9uRGV0ZWN0b3Ige1xuICAgIHB1YmxpYyBpc0FzeW5jPFQ+KGV4cHJlc3Npb246IElFeHByZXNzaW9uPFQ+KSB7XG4gICAgICAgIGlmIChleHByZXNzaW9uIGluc3RhbmNlb2YgSXQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdldCA9ICgpID0+IHByb3h5O1xuICAgICAgICBjb25zdCBzZXQgPSAoKSA9PiB0cnVlO1xuICAgICAgICBjb25zdCBhcHBseSA9ICgpID0+IHByb3h5O1xuICAgICAgICBjb25zdCBoYXMgPSAoKSA9PiBmYWxzZTtcbiAgICAgICAgY29uc3QgY29uc3RydWN0ID0gKCkgPT4gcHJveHk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7Z2V0LCBzZXQsIGFwcGx5LCBoYXMsIGNvbnN0cnVjdH07XG4gICAgICAgIGNvbnN0IHJlZmxlY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHJlZmxlY3Rvciwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IGV4cHJlc3Npb24ocHJveHkgYXMgYW55KTtcblxuICAgICAgICByZXR1cm4gcHJlZGljYXRlIGluc3RhbmNlb2YgSXQgPyBmYWxzZSA6IHByZWRpY2F0ZSBpbnN0YW5jZW9mIFByb21pc2U7XG4gICAgfVxufVxuIl19